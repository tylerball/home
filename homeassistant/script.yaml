grinch_mode:
  alias: 'Grinch Mode'
  sequence:
    - service: switch.turn_on
      entity_id: switch.living_room_speakers
    - service: media_player.volume_set
      data:
        entity_id: media_player.receiver
        volume_level: '0.4'
    - service: media_player.clear_playlist
      entity_id: media_player.mpd
    - service: media_player.shuffle_set
      data:
        entity_id: media_player.mpd
        shuffle: true
    - service: media_player.play_media
      data:
        entity_id: media_player.mpd
        media_content_type: playlist
        media_content_id: 'file:/mnt/pool/tunes/grinch'
    - service: light.turn_on
      data:
        entity_id: light.living_room_lamp
        brightness: 255
        rgb_color: [0,255,0]

burn_it_down:
  alias: 'Burn it Down'
  sequence:
    - service: media_player.media_pause
      data:
        entity_id: media_player.mpd
    - service: media_player.clear_playlist
      data:
        entity_id: media_player.mpd
    - service: scene.turn_on
      entity_id: scene.sunset

music_alarm:
  alias: 'Music Alarm'
  sequence:
    - service: switch.turn_on
      entity_id: switch.bedroom_speakers
    - service: input_number.set_value
      data:
        entity_id: input_number.bedroom_volume
        value: 20
    - service: media_player.clear_playlist
      entity_id: media_player.mpd
    - service: media_player.shuffle_set
      data:
        entity_id: media_player.mpd
        shuffle: true
    - service: media_player.play_media
      data:
        entity_id: media_player.mpd
        media_content_type: playlist
        media_content_id: 'file:/mnt/pool/tunes/alarm'
    - service: light.turn_on
      data:
        entity_id: light.tylers_light
        brightness: 200
        transition: 6000
    - service: script.volume_fade

volume_fade:
  alias: increase volume
  sequence:
  - data_template:
      value: '{{ (states.input_number.bedroom_volume.state | int) +2 }}'
      entity_id: input_number.bedroom_volume
    service: input_number.set_value
  - delay: 00:00:20
  - condition: template
    value_template: '{{ (states.input_number.bedroom_volume.state | int) < 40 }}'
  - data:
      entity_id: script.volume_fade_b
    service: script.turn_on

volume_fade_b:
  alias: increase volume
  sequence:
  - data_template:
      value: '{{ (states.input_number.bedroom_volume.state | int) +2 }}'
      entity_id: input_number.bedroom_volume
    service: input_number.set_value
  - delay: 00:00:20
  - condition: template
    value_template: '{{ (states.input_number.bedroom_volume.state | int) < 40 }}'
  - data:
      entity_id: script.volume_fade
    service: script.turn_on

light_alarm:
  alias: 'Light alarm'
  sequence:
    - service: light.turn_on
      data:
        entity_id: light.jens_light
        brightness: 200
        transition: 6000
